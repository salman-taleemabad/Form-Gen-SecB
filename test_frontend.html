<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Test</title>
</head>
<body>
    <h1>Frontend Test</h1>
    <button onclick="testRenderRubric()">Test Render Rubric</button>
    <div id="test-output"></div>

    <script>
        // Copy the renderRubricTable function from app.js
        function renderRubricTable(rubric) {
            console.log("üîç DEBUG: renderRubricTable called with:", rubric);
            
            const outputDiv = document.getElementById('test-output');
            
            // Check if it's the new format (object with questions array)
            if (rubric && rubric.questions && Array.isArray(rubric.questions)) {
                console.log("üîç DEBUG: Using new format with questions array");
                if (rubric.questions.length === 0) {
                    outputDiv.innerHTML = '<p>No rubric generated.</p>';
                    return;
                }
                
                let html = '<table id="rubric-table"><thead><tr>' +
                    '<th>Code</th>' +
                    '<th>Indicator Description</th>' +
                    '<th>Yes</th>' +
                    '<th>Partial</th>' +
                    '<th>No</th>' +
                    '</tr></thead><tbody>';
                
                for (const question of rubric.questions) {
                    const yesOption = question.options.find(opt => opt.score_type === 'yes') || {};
                    const partialOption = question.options.find(opt => opt.score_type === 'partial') || {};
                    const noOption = question.options.find(opt => opt.score_type === 'no') || {};
                    
                    html += '<tr>' +
                        `<td class="code-cell">B${question.order}</td>` +
                        `<td>${question.prompt}</td>` +
                        `<td>${yesOption.label || ''}</td>` +
                        `<td>${partialOption.label || ''}</td>` +
                        `<td>${noOption.label || ''}</td>` +
                        '</tr>';
                }
                html += '</tbody></table>';
                outputDiv.innerHTML = html;
                return;
            }
            
            // Check if it's the old format (array of objects)
            if (Array.isArray(rubric) && rubric.length > 0) {
                console.log("üîç DEBUG: Using old format with array");
                let html = '<table id="rubric-table"><thead><tr>' +
                    '<th>Code</th>' +
                    '<th>Indicator Description</th>' +
                    '<th>Yes</th>' +
                    '<th>Partial</th>' +
                    '<th>No</th>' +
                    '</tr></thead><tbody>';
                for (const row of rubric) {
                    html += '<tr>' +
                        `<td class="code-cell">${row.code}</td>` +
                        `<td>${row.indicator_description}</td>` +
                        `<td>${row.yes}</td>` +
                        `<td>${row.partial}</td>` +
                        `<td>${row.no}</td>` +
                        '</tr>';
                }
                html += '</tbody></table>';
                outputDiv.innerHTML = html;
                return;
            }
            
            // If neither format works
            console.log("‚ùå DEBUG: No valid rubric format found");
            outputDiv.innerHTML = '<p>No rubric generated.</p>';
        }

        function testRenderRubric() {
            // Test with the actual API response format
            const testRubric = {
                "questions": [
                    {
                        "prompt": "B1: The teacher clearly states the lesson's objectives at the start verbally and in written form.",
                        "order": 1,
                        "options": [
                            {
                                "label": "The teacher states and writes: 'Identify different types of fractions.'",
                                "value": "A",
                                "score_type": "yes",
                                "order": 1
                            },
                            {
                                "label": "The SLO is stated either verbally or in written form, but not both.",
                                "value": "B",
                                "score_type": "partial",
                                "order": 2
                            },
                            {
                                "label": "The SLO is not stated at all‚Äîneither verbally nor in written form.",
                                "value": "C",
                                "score_type": "no",
                                "order": 3
                            }
                        ]
                    },
                    {
                        "prompt": "B2: The teacher uses either the resources outlined in the lesson plan or alternative resources facilitating the SLO.",
                        "order": 2,
                        "options": [
                            {
                                "label": "The teacher uses fraction circles and number lines as specified.",
                                "value": "A",
                                "score_type": "yes",
                                "order": 1
                            },
                            {
                                "label": "The teacher uses some resources but not all as outlined.",
                                "value": "B",
                                "score_type": "partial",
                                "order": 2
                            },
                            {
                                "label": "The teacher does not use any of the resources outlined.",
                                "value": "C",
                                "score_type": "no",
                                "order": 3
                            }
                        ]
                    }
                ]
            };
            
            console.log("üß™ Testing with sample rubric:", testRubric);
            renderRubricTable(testRubric);
        }
    </script>
</body>
</html> 